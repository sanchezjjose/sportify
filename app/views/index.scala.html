@(header: String, gameOpt: Option[Game])

@import helper._

@main(Html("Next Game."), nav = "home") {

  @gameOpt.map { game =>
  <ul>
      <h3>Gilt Unit vs. @game.opponent</h3>

      <b>Game @game.game_seq</b> <br>
      <b>Time</b>: @game.startTime <br>
      <b>Location</b>: @game.address <br>
      @if(!game.locationDetails.isEmpty()){
        <b><font color="red">*&nbsp;</font></b>@game.locationDetails <br>
      }

      <h3>@game.playerIds.size Confirmed.</h3>
      <ul>
          @for(playerId <- game.playerIds){
            @if(User.findById(playerId).isDefined){
               o&nbsp; @User.findById(playerId).get.firstName @User.findById(playerId).get.lastName <br>
              }
          }
      </ul>

    <br><br>

    <div id="map-canvas" style="width: 800px; height: 400px;"></div>

    <script type="text/javascript">

      function initialize() {
        var directionsDisplay;
        var map;
        var directionsService = new google.maps.DirectionsService();
        var manhattan = new google.maps.LatLng(40.7711329, -73.9741874);

        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapOptions = {
          zoom: 14,
          center: manhattan,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
        directionsDisplay.setMap(map);

        var request = {
          origin: '2 Park Ave, New York',
          destination: '@game.address, New York',
          travelMode: google.maps.DirectionsTravelMode.TRANSIT
        };

        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(response);
          }
        });
      }

      function loadScript() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "http://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
        document.body.appendChild(script);
      }

      window.onload = loadScript;

    </script>


  </ul>
  }.getOrElse{ NO GAMES. }
}